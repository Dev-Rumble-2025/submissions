<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Teacher Dashboard — CollegeConnect</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root{--blue:#0f2a5f;--muted:#64748b}
  *{box-sizing:border-box}
  body{margin:0;font-family:Poppins, sans-serif;background:#f8fafc;color:#0f1724}
  .navbar{background:linear-gradient(90deg,var(--blue),#0b1f47);color:white;padding:12px 20px;display:flex;justify-content:space-between;align-items:center}
  .logo{display:flex;gap:12px;align-items:center}
  .logo-box{width:36px;height:36px;border-radius:10px;background:white;color:var(--blue);display:grid;place-items:center;font-weight:900}
  .nav-links{display:flex;gap:12px}
  .nav-links a{color:white;text-decoration:none;padding:6px 8px;border-radius:8px}
  .container{max-width:1100px;margin:18px auto;padding:0 16px}
  .grid{display:grid;grid-template-columns:2fr 1fr;gap:16px}
  .card{background:white;border-radius:12px;padding:14px;box-shadow:0 6px 24px rgba(11,20,40,0.04);border:1px solid #eef2f7}
  .stats{display:flex;gap:12px}
  .stat{flex:1;padding:12px;border-radius:10px;background:#fff}
  .ann-list{max-height:220px;overflow:auto}
  .btn{background:var(--blue);color:white;padding:8px 12px;border:none;border-radius:10px;cursor:pointer}
  @media(max-width:900px){ .grid{grid-template-columns:1fr} .nav-links{display:none} }
</style>
</head>
<body>
  <header class="navbar">
    <div class="logo"><div class="logo-box">TC</div><div style="font-weight:700">CollegeConnect — Teacher</div></div>
    <nav class="nav-links">
      <a href="teacher_dashboard.html">Dashboard</a>
      <a href="teacher_quizzes.html">Quizzes</a>
      <a href="teacher_tasks.html">Assignments</a>
      <a href="teacher_roster.html">Roster</a>
      <a href="teacher_profile.html">Profile</a>
    </nav>
  </header>

  <main class="container">
    <div class="grid">
      <section>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h2 style="margin:0">Overview</h2>
            <div id="teacherName" style="color:var(--muted)"></div>
          </div>

          <div style="margin-top:12px" class="stats">
            <div class="stat">
              <div style="color:var(--muted)">Classes</div>
              <div id="classesCount" style="font-weight:700;font-size:20px">1</div>
            </div>
            <div class="stat">
              <div style="color:var(--muted)">Pending Grading</div>
              <div id="pendingCount" style="font-weight:700;font-size:20px">0</div>
            </div>
            <div class="stat">
              <div style="color:var(--muted)">Active Quizzes</div>
              <div id="activeQ" style="font-weight:700;font-size:20px">0</div>
            </div>
          </div>

          <div style="margin-top:16px;display:flex;gap:10px;align-items:center">
            <input id="annInput" placeholder="Write announcement..." style="flex:1;padding:10px;border-radius:10px;border:1px solid #e6eef7"/>
            <button id="postAnn" class="btn">Post</button>
          </div>

          <div style="margin-top:12px">
            <div style="font-weight:600;margin-bottom:6px">Recent Announcements</div>
            <div id="annList" class="ann-list"></div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3 style="margin-top:0">Quick Actions</h3>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button onclick="location.href='teacher_quizzes.html'" class="btn">Create Quiz</button>
            <button onclick="location.href='teacher_tasks.html'" class="btn">Create Assignment</button>
            <button onclick="location.href='teacher_roster.html'" class="btn">Open Roster</button>
          </div>
        </div>
      </section>

      <aside>
        <div class="card">
          <div style="font-weight:600">Notifications</div>
          <div id="notifArea" style="margin-top:8px;color:var(--muted);font-size:0.95rem"></div>
        </div>

        <div class="card" style="margin-top:12px">
          <div style="font-weight:600">Latest Submissions</div>
          <ul id="subList" style="margin-top:8px;padding-left:16px;color:var(--muted)"></ul>
        </div>
      </aside>
    </div>
  </main>

<script>
  // Get teacher user
  const user = JSON.parse(localStorage.getItem('tc_user')||'{"id":"t1001","name":"Prof.Rao"}');
  document.getElementById('teacherName').innerText = user.name;

  // Load data from localStorage
  const quizzes = JSON.parse(localStorage.getItem('tc_quizzes')||'[]');
  const assignments = JSON.parse(localStorage.getItem('tc_assignments')||'[]');
  const roster = JSON.parse(localStorage.getItem('tc_roster')||'[]');
  const announcements = JSON.parse(localStorage.getItem('tc_announcements')||'[]');

  function updateStats(){
    document.getElementById('classesCount').innerText = Math.max(1, roster.length>0 ? 1 : 1);
    const pending = assignments.filter(a=>!a.graded).length;
    document.getElementById('pendingCount').innerText = pending;
    const active = quizzes.filter(q=>q.status==='active').length;
    document.getElementById('activeQ').innerText = active;
  }

  function renderAnnouncements(){
    const area = document.getElementById('annList'); area.innerHTML='';
    announcements.slice().reverse().forEach(a=>{
      const div = document.createElement('div');
      div.style.padding='8px'; div.style.borderBottom='1px solid #f1f5f9';
      div.innerHTML = `<div style="font-weight:600">${a.title||'Announcement'}</div><div style="font-size:0.9rem;color:var(--muted)">${new Date(a.at).toLocaleString()}</div><div style="margin-top:6px">${a.text}</div>`;
      area.appendChild(div);
    });
    if(announcements.length===0) area.innerHTML = '<div style="color:var(--muted)">No announcements yet.</div>';
  }

  document.getElementById('postAnn').addEventListener('click', ()=>{
    const text = document.getElementById('annInput').value.trim();
    if(!text) return alert('Write something first');
    const item = {id:'a'+Date.now(), title:'Instructor', text, at: Date.now()};
    announcements.push(item);
    localStorage.setItem('tc_announcements', JSON.stringify(announcements));
    document.getElementById('annInput').value='';
    renderAnnouncements();
  });

  // notifications & submissions (demo)
  document.getElementById('notifArea').innerHTML = 'You have ' + assignments.filter(a=>!a.graded).length + ' assignments to grade.';
  const subs = assignments.slice(-5).map(a=>`<li>${a.title} — submitted by ${a.submittedBy||'Student'}</li>`);
  document.getElementById('subList').innerHTML = subs.join('') || '<li style="color:var(--muted)">No recent submissions</li>';

  updateStats();
  renderAnnouncements();
</script>
</body>
</html>
